# Описание скрипта `clang-format_all_tree.sh`

## Назначение
Скрипт `clang-format_all_tree.sh` предназначен для автоматической проверки и форматирования исходных файлов на языке C (`*.c`, `*.h`) в текущей директории и всех её поддиректориях с помощью утилиты `clang-format`. Он также предоставляет возможность автоматического исправления форматирования при обнаружении несоответствий.

## Требования
- Установленная утилита `clang-format`.
- Файл стиля `.clang-format` (скрипт может скопировать его из указанного расположения, если файл отсутствует).

## Использование
1. Запустите скрипт в терминале:
   ```bash
   ./clang-format_all_tree.sh
   ```
## Функциональность
1. Проверка наличия clang-format
Скрипт проверяет, установлена ли утилита clang-format. Если нет, выводится сообщение об ошибке.

2. Проверка наличия файла .clang-format

Если файл .clang-format отсутствует в текущей директории, скрипт пытается скопировать его из указанного исходного расположения (../materials/linters/.clang-format).

Если исходный файл также отсутствует, скрипт завершается с ошибкой.

3. Поиск файлов для проверки
Скрипт рекурсивно ищет все файлы с расширениями .c и .h в текущей директории и её поддиректориях.

4. Проверка форматирования
Для каждого найденного файла выполняется проверка соответствия стилю, указанному в .clang-format, с помощью команды:

```bash
  clang-format --style=file --dry-run --Werror "$file"
```
Если файл не соответствует стилю, его имя выводится на экран.

5. Автоматическое форматирование

Если обнаружены файлы с несоответствующим форматированием, скрипт предлагает автоматически исправить их.

Пользователь может выбрать:

y/Y — исправить форматирование.

n/N — пропустить исправление.

Любой другой ввод — отмена форматирования.

Форматирование выполняется командой:

```bash
  clang-format --style=file -i "$file"
```

## Пример вывода
   ```
  Проверка форматирования файлов с помощью clang-format...
  Ошибка форматирования в файле: ./src/main.c
  Ошибка форматирования в файле: ./include/utils.h

  Найдены файлы, не соответствующие clang-format:
  ./src/main.c
  ./include/utils.h

  Хотите автоматически отформатировать эти файлы? (y/n): y
  Форматирование файлов...
  Отформатирован: ./src/main.c
  Отформатирован: ./include/utils.h
  Форматирование завершено.
  ```
